/**
 * This file is copyright 2017 State of the Netherlands (Ministry of Interior Affairs and Kingdom Relations).
 * It is made available under the terms of the GNU Affero General Public License, version 3 as published by the Free Software Foundation.
 * The project of which this file is part, may be found at https://github.com/MinBZK/operatieBRP.
 */

package nl.bzk.migratiebrp.isc.jbpm.uc808;

import java.util.Arrays;
import nl.bzk.migratiebrp.bericht.model.lo3.Lo3Inhoud;
import org.junit.Assert;
import org.junit.Test;

public class PersoonslijstOverzichtTest {

    @Test
    public void test() throws Exception {
        final PersoonslijstOverzichtBuilder builder = new PersoonslijstOverzichtBuilder();
        builder.voegPersoonslijstToe(Lo3Inhoud.parseInhoud(
                "01498011810110010580467945701200094008372250210005Josie0240005Maarn03100081966082103200040014033000460300410001V6110001V821000405188220008199409288230008NAAMWIJZ851000819940928861000819940929511810110010580467945701200094008372250210010Josie Beth0240005Maarn03100081966082103200040014033000460300410001V6110001V821000405188220008199409308230003PKA851000819660821861000819660822021500210006Bertha0240005Baarn03100081942083103200040013033000460300410001V621000819660821821000405188220008199409308230002PK851000819660821861000819940930031480210004Pete0240005Maarn03100081938111803200040013033000460300410001M621000819660821821000405188220008199409308230002PK85100081966082186100081994093004086051000400016310003001821000405188220008199409308230002PK851000819660821861000819940930070776810008199409306910004051870100010801000400038020017201207011435010008710001P08235091000406260920008199806221010001W1030008199806221110010S vd Oyeln1115038Baron Schimmelpenninck van der Oyelaan11200021611600062252EB1170011Voorschoten11800160626010010016001119001606262000100160017210001T85100082011031686100082011031758126091000406260920008199806221010001W1030008199806221110010S vd Oyeln11200021611600062252EB7210001I85100081998062286100081998062458131091000405180920008199010021010001W1030008199512131110014Waldorpsstraat112000330411600062521CG7210001I85100081995121386100081995121458133091000405180920008199010021010001W1030008199010021110017Van Swietenstraat11200022011600062518EH7210001A851000819901002861000819940930"));

        builder.voegPersoonslijstToe(Lo3Inhoud.parseInhoud(
                "01328011810110010580467945701200094008372250210010Josie "
                        +
                        "Beth0240005Maarn03100081966082103200040014033000460300410001V6110001V821000405188220008196608218230003PKA851000819660821861000819660822021500210006Bertha0240005Baarn03100081942083103200040013033000460300410001V621000819660821821000405188220008199409308230002PK851000819660821861000819940930031640210005Jozef0230007van der0240006Blaren03100081936010103200040599033000460300410001M621000819540304821000405188220008199409308230002PK85100081966082186100081994093004086051000400016310003001821000405188220008199409308230002PK851000819660821861000819940930070776810008199409306910004051870100010801000400038020017201207011435010008710001P08235091000406260920008199806221010001W1030008199806221110010S vd Oyeln1115038Baron Schimmelpenninck van der Oyelaan11200021611600062252EB1170011Voorschoten11800160626010010016001119001606262000100160017210001T85100082011031686100082011031758126091000406260920008199806221010001W1030008199806221110010S vd Oyeln11200021611600062252EB7210001I85100081998062286100081998062458131091000405180920008199010021010001W1030008199512131110014Waldorpsstraat112000330411600062521CG7210001I85100081997121386100081997121458133091000405180920008199010021010001W1030008199010021110017Van Swietenstraat11200022011600062518EH7210001A851000819901002861000819940930"));
        builder.voegPersoonslijstToe(Lo3Inhoud.parseInhoud(
                "01221011810110010580467945701200094008372250210005Josie0240005Maarn03100081966082103200040014033000460300410001V6110001V821000405188220008199409288230008NAAMWIJZ851000819940928861000819940929511810110010580467945701200094008372250210010Josie Beth0240005Maarn03100081966082103200040014033000460300410001V6110001V821000405188220008199409308230003PKA851000819660821861000819660823021500210006Bertha0240005Baarn03100081942083103200040013033000460300410001V621000819660821821000405188220008199409308230002PK851000819660821861000819940930031480210004Pete0240005Maarn03100081938111803200040013033000460300410001M621000819660821821000405188220008199409308230002PK8510008196608218610008199409300407605100040003821000405188220008199409308230002PK851000819660821861000819920930070776810008199409306910004051870100010801000400038020017201207011435010008710001P08235091000406260920008199806221010001W1030008199806221110010S vd Oyeln1115038Baron Schimmelpenninck van der Oyelaan11200021611600062252EB1170011Voorschoten11800160626010010016001119001606262000100160017210001T85100082011031686100082011031758133091000405180920008199010021010001W1030008199010021110017Van Swietenstraat11200022011600062518EH7210001A851000819901002861000819940930"));

        final PersoonslijstOverzicht overzicht = builder.build();
        Assert.assertNotNull(overzicht);
        Assert.assertEquals(3, overzicht.getAantalPersoonslijsten());
        Assert.assertEquals(Arrays.asList("5804679457", "5804679457", "5804679457"), overzicht.getIdentificaties());
        Assert.assertEquals(12, overzicht.getCategorieen().size());
        PersoonslijstOverzicht.Categorie categorie01 = overzicht.getCategorieen().get(0);
        Assert.assertEquals(25, categorie01.getElementen().size());
        PersoonslijstOverzicht.Element element0110 = categorie01.getElementen().get(0);
        Assert.assertEquals("01.10 A-nummer", element0110.getTitel());
        Assert.assertEquals(Arrays.asList("5804679457", "5804679457", "5804679457"), element0110.getWaarden());
        PersoonslijstOverzicht.Element element0210 = categorie01.getElementen().get(2);
        Assert.assertEquals("02.10 Voornamen", element0210.getTitel());
        Assert.assertEquals(Arrays.asList("Josie", "Josie Beth", "Josie"), element0210.getWaarden());

        System.out.println("Identificaties: " + overzicht.getIdentificaties());
        for (PersoonslijstOverzicht.Categorie categorie : overzicht.getCategorieen()) {
            System.out.println("Categorie: " + categorie.getTitel());
            for (PersoonslijstOverzicht.Element element : categorie.getElementen()) {
                System.out.println("Element: " + element.getTitel() + " -> " + element.getWaarden());
            }
        }
    }
}
