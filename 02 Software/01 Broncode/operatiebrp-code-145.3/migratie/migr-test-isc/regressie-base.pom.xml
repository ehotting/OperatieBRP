<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>nl.bzk.migratiebrp</groupId>
        <artifactId>migr</artifactId>
        <version>145.3</version>
        <relativePath>../migr</relativePath>
    </parent>

    <artifactId>migr-test-isc-regressie-base</artifactId>
    <packaging>pom</packaging>
    <name>Migr - Test - ISC Processen - Regressie Basis</name>

    <properties>
        <!-- Test -->
        <regressietest.class>EmptyTest</regressietest.class>
        <regressietest.properties>empty.properties</regressietest.properties>
    </properties>

    <dependencies>
        <!-- Reuse dependencies from 'real' pom -->
        <dependency>
            <groupId>nl.bzk.migratiebrp</groupId>
            <artifactId>migr-test-isc</artifactId>
            <type>pom</type>
        </dependency>

        <dependency>
            <groupId>nl.bzk.migratiebrp</groupId>
            <artifactId>migr-tools-controle</artifactId>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
        </dependency>
    </dependencies>

    <build>
        <directory>${project.basedir}/target/regressie/${project.artifactId}</directory>

        <plugins>
            <!-- Read environment properties into maven -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>properties-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>read-regressie-config</id>
                        <phase>none</phase>
                        <goals>
                            <goal>read-project-properties</goal>
                        </goals>
                        <configuration>
                            <files>
                                <file>${project.build.directory}/test-classes/datasource.properties</file>
                            </files>
                        </configuration>
                    </execution>
                </executions>
            </plugin>

            <!-- Wait for environment te be started -->
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <executions>
                    <execution>
                        <id>brp-messagebroker-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.messagebroker.jmx.service.host}:${brp.messagebroker.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.messagebroker.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.messagebroker.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.MessageBrokerInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-afnemerindicatie-gba-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.afnemerindicatie-gba.jmx.service.host}:${brp.afnemerindicatie-gba.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.afnemerindicatie-gba.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.afnemerindicatie-gba.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BrpAfnemerindicatieGbaInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-bevraging-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.bevraging-gba.jmx.service.host}:${brp.bevraging-gba.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.bevraging-gba.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.bevraging-gba.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BevragingInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-bijhouding-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.bijhouding.jmx.service.host}:${brp.bijhouding.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.bijhouding.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.bijhouding.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BijhoudingInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-mutatielevering-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.mutatielevering.jmx.service.host}:${brp.mutatielevering.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.mutatielevering.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.mutatielevering.jmx.service.password}</argument>
                                <argument>-Djdbc.driver=${brp.jdbc.driverClassName}</argument>
                                <argument>-Djdbc.url=${brp.jdbc.url}</argument>
                                <argument>-Djdbc.username=${brp.jdbc.username}</argument>
                                <argument>-Djdbc.password=${brp.jdbc.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.MutatieleveringInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-selectie-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.selectie.jmx.service.host}:${brp.selectie.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.selectie.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.selectie.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BrpSelectieInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-selectie-verwerker-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.selectie-verwerker.jmx.service.host}:${brp.selectie-verwerker.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.selectie-verwerker.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.selectie-verwerker.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BrpSelectieVerwerkerInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-selectie-afnemerindicatie-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.selectie-afnemerindicatie.jmx.service.host}:${brp.selectie-afnemerindicatie.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.selectie-afnemerindicatie.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.selectie-afnemerindicatie.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BrpSelectieAfnemerindicatieInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-selectie-schrijver-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.selectie-schrijver.jmx.service.host}:${brp.selectie-schrijver.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.selectie-schrijver.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.selectie-schrijver.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BrpSelectieSchrijverInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-selectie-messagebroker-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.selectie-messagebroker.jmx.service.host}:${brp.selectie-messagebroker.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.selectie-messagebroker.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.selectie-messagebroker.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BrpSelectieMessagebrokerInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-vrijbericht-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.vrijbericht-gba.jmx.service.host}:${brp.vrijbericht-gba.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.vrijbericht-gba.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.vrijbericht-gba.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BrpVrijBerichtInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-verzending-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${brp.verzending.jmx.service.host}:${brp.verzending.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${brp.verzending.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${brp.verzending.jmx.service.password}</argument>
                                <argument>-Djdbc.driver=${brp.jdbc.driverClassName}</argument>
                                <argument>-Djdbc.url=${brp.jdbc.url}</argument>
                                <argument>-Djdbc.username=${brp.jdbc.username}</argument>
                                <argument>-Djdbc.password=${brp.jdbc.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.VerzendingInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>brp-beheer-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>-Djdbc.driver=${brp.jdbc.driverClassName}</argument>
                                <argument>-Djdbc.url=${brp.jdbc.url}</argument>
                                <argument>-Djdbc.username=${brp.jdbc.username}</argument>
                                <argument>-Djdbc.password=${brp.jdbc.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.BeheerInitializationWaiter</argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>migr-mailbox-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${mailbox.jmx.service.host}:${mailbox.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${mailbox.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${mailbox.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.MailboxInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>isc-routering-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${routering.jmx.service.host}:${routering.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${routering.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${routering.jmx.service.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.RouteringInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>isc-synchronisatie-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${sync.jmx.service.host}:${sync.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${sync.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${sync.jmx.service.password}</argument>
                                <argument>-Djdbc.driver=org.postgresql.Driver</argument>
                                <argument>
                                    -Djdbc.url=jdbc:postgresql://${sync.database.host}:${sync.database.port}/${sync.database.name}
                                </argument>
                                <argument>-Djdbc.username=${sync.database.username}</argument>
                                <argument>-Djdbc.password=${sync.database.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.SynchronisatieInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>isc-isc-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${isc.jmx.service.host}:${isc.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${isc.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${isc.jmx.service.password}</argument>
                                <argument>-Djdbc.driver=org.postgresql.Driver</argument>
                                <argument>-Djdbc.url=${isc.jdbc.url}</argument>
                                <argument>-Djdbc.username=${isc.jdbc.username}</argument>
                                <argument>-Djdbc.password=${isc.jdbc.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.IscInitializationWaiter</argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>isc-voisc-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>
                                    -Djmx.service.url=service:jmx:simple://${voisc.jmx.service.host}:${voisc.jmx.service.port}
                                </argument>
                                <argument>-Djmx.service.username=${voisc.jmx.service.username}</argument>
                                <argument>-Djmx.service.password=${voisc.jmx.service.password}</argument>
                                <argument>-Djdbc.driver=org.postgresql.Driver</argument>
                                <argument>
                                    -Djdbc.url=jdbc:postgresql://${voisc.database.host}:${voisc.database.port}/${voisc.database.name}
                                </argument>
                                <argument>-Djdbc.username=${voisc.database.username}</argument>
                                <argument>-Djdbc.password=${voisc.database.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.VoiscInitializationWaiter</argument>
                            </arguments>
                        </configuration>
                    </execution>
                    <execution>
                        <id>isc-console-initialization-waiter</id>
                        <phase>none</phase>
                        <goals>
                            <goal>exec</goal>
                        </goals>
                        <configuration>
                            <executable>java</executable>
                            <arguments>
                                <argument>-Djdbc.driver=org.postgresql.Driver</argument>
                                <argument>-Djdbc.url=${isc.jdbc.url}</argument>
                                <argument>-Djdbc.username=${isc.jdbc.username}</argument>
                                <argument>-Djdbc.password=${isc.jdbc.password}</argument>
                                <argument>-classpath</argument>
                                <classpath />
                                <argument>nl.bzk.migratiebrp.tools.controle.waiter.IscConsoleInitializationWaiter
                                </argument>
                            </arguments>
                        </configuration>
                    </execution>

                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-resources</id>
                        <phase>none</phase>
                    </execution>
                    <execution>
                        <id>default-testResources</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-compile</id>
                        <phase>none</phase>
                    </execution>
                    <execution>
                        <id>default-testCompile</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-test</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-jar</id>
                        <phase>none</phase>
                    </execution>
                    <execution>
                        <id>jar-test-jar</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>nl.bzk.brp</groupId>
                <artifactId>build-plugin-timestamp</artifactId>
                <executions>
                    <execution>
                        <id>reset-timestamp</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-failsafe-plugin</artifactId>
                <executions>
                    <execution>
                        <id>integration-test</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-install-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-install</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-deploy-plugin</artifactId>
                <executions>
                    <execution>
                        <id>default-deploy</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-source-plugin</artifactId>
                <executions>
                    <execution>
                        <id>attach-sources</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-javadoc-plugin</artifactId>
                <executions>
                    <execution>
                        <id>attach-javadoc</id>
                        <phase>none</phase>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <profiles>
        <profile>
            <id>env-docker-server</id>
            <activation>
                <property>
                    <name>env.DOCKER_SERVER</name>
                </property>
            </activation>
            <properties>
                <docker.server>${env.DOCKER_SERVER}</docker.server>
            </properties>
        </profile>

        <profile>
            <id>env-docker-port</id>
            <activation>
                <property>
                    <name>env.DOCKER_PORT</name>
                </property>
            </activation>
            <properties>
                <docker.port>${env.DOCKER_PORT}</docker.port>
            </properties>
        </profile>

        <profile>
            <id>env-image-version</id>
            <activation>
                <property>
                    <name>env.IMAGE_VERSION</name>
                </property>
            </activation>
            <properties>
                <image.version>${env.IMAGE_VERSION}</image.version>
            </properties>
        </profile>

        <profile>
            <id>env-image-registry</id>
            <activation>
                <property>
                    <name>env.IMAGE_REGISTRY</name>
                </property>
            </activation>
            <properties>
                <image.registry>${env.IMAGE_REGISTRY}</image.registry>
            </properties>
        </profile>

        <profile>
            <id>env-test-properties</id>
            <activation>
                <property>
                    <name>env.REGRESSIETEST_PROPERTIES</name>
                </property>
            </activation>
            <properties>
                <regressietest.properties>${env.REGRESSIETEST_PROPERTIES}</regressietest.properties>
            </properties>
        </profile>

        <profile>
            <id>regressie</id>
            <build>
                <plugins>
                    <!-- Copy environment properties -->
                    <plugin>
                        <groupId>com.coderplus.maven.plugins</groupId>
                        <artifactId>copy-rename-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>copy-regressie-config</id>
                                <phase>process-test-resources</phase>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <configuration>
                                    <sourceFile>src/test/configuration/${regressietest.properties}</sourceFile>
                                    <destinationFile>${project.build.directory}/test-classes/datasource.properties</destinationFile>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Compile test tooling -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-resources-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>default-resources</id>
                                <phase>process-resources</phase>
                            </execution>
                            <execution>
                                <id>default-testResources</id>
                                <phase>process-test-resources</phase>
                            </execution>
                        </executions>
                    </plugin>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-compiler-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>default-compile</id>
                                <phase>compile</phase>
                            </execution>
                            <execution>
                                <id>default-testCompile</id>
                                <phase>test-compile</phase>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Execute configured test -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-surefire-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>default-test</id>
                                <phase>test</phase>
                                <configuration>
                                    <argLine>-DDOCKER_VERSION=@{DOCKER_VERSION}</argLine>
                                    <redirectTestOutputToFile>false</redirectTestOutputToFile>
                                    <failIfNoTests>false</failIfNoTests>
                                    <test>${regressietest.class}</test>
                                    <excludes>
                                        <exclude>**/*</exclude>
                                    </excludes>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project>
