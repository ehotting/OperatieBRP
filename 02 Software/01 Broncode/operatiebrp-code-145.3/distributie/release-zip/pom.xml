<?xml version="1.0"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>nl.bzk.brp</groupId>
        <artifactId>distributie-release</artifactId>
        <version>145.3</version>
        <relativePath>../release</relativePath>
    </parent>

    <artifactId>distributie-release-zip</artifactId>
    <packaging>pom</packaging>
    <name>Distributie - Release - Zip</name>

    <profiles>
        <profile>
            <id>zip</id>
            <dependencies>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-afnemervoorbeeld</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-ah-publicatie</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-mutatielevering</artifactId>
                    <version>${project.version}</version>
                    <type>jar</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-synchronisatie</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-verzending</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-afnemerindicatie</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>brp-message-broker</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-selectie</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-selectie-verwerker</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-selectie-schrijver</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-selectie-message-broker</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-selectie-protocollering</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.bijhouding</groupId>
                    <artifactId>brp-bijhouding-delivery-ws</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.leveren</groupId>
                    <artifactId>brp-delivery-bevraging</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp.beheer</groupId>
                    <artifactId>brp-beheer-api</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>

                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-init-naarbrp</artifactId>
                    <version>${project.version}</version>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-init-naarvoisc</artifactId>
                    <version>${project.version}</version>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-routering-runtime</artifactId>
                    <version>${project.version}</version>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-isc-database</artifactId>
                    <version>${project.version}</version>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-voisc-database</artifactId>
                    <version>${project.version}</version>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-tools-mailbox</artifactId>
                    <version>${project.version}</version>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-isc-console-webapp</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-ggo-viewer</artifactId>
                    <version>${project.version}</version>
                    <type>war</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.migratiebrp</groupId>
                    <artifactId>migr-tools-controle</artifactId>
                    <version>${project.version}</version>
                </dependency>

                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-iv-logging</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-iv-naarbrp</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-iv-naarlo3</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-iv-naarvoisc</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-iv-hornetq</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-isc-synchronisatie</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-isc-isc</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-isc-routering</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-isc-voisc</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-tools-mailbox</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-tools-levering-vergelijker</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
                <dependency>
                    <groupId>nl.bzk.brp</groupId>
                    <artifactId>distributie-zip-tools-proefsynchronisatie</artifactId>
                    <version>${project.version}</version>
                    <type>zip</type>
                </dependency>
            </dependencies>
            <build>
                <plugins>
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-dependency-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>unpack-iv-sql</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-init-naarbrp</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/iv-sql</outputDirectory>
                                            <includes>
                                                sql/createInitVullingTables.sql,sql/init_lo3_database.sql
                                            </includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-naarvoisc-sql</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-init-naarvoisc</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/naarvoisc-sql</outputDirectory>
                                            <includes>sql/*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-routering-sql</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-routering-runtime</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/routering-sql</outputDirectory>
                                            <includes>sql/activemq-*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-isc-sql</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-isc-database</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/isc-sql</outputDirectory>
                                            <includes>sql/jbpm-*.sql,sql/mig-*.sql,sql/qrtz-*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-voisc-sql</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-voisc-database</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/voisc-sql</outputDirectory>
                                            <includes>sql/voisc-*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-ggo-sql</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-ggo-viewer</artifactId>
                                            <version>${project.version}</version>
                                            <classifier>tests</classifier>
                                            <!--<type>test-jar</type>-->
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/ggo-sql</outputDirectory>
                                            <includes>sql/postgres/create*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-mailbox-sql</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-tools-mailbox</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                            <overWrite>false</overWrite>
                                            <outputDirectory>${project.build.directory}/mailbox-sql</outputDirectory>
                                            <includes>sql/*.sql</includes>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                            <execution>
                                <id>unpack-brp-sql</id>
                                <goals>
                                    <goal>unpack</goal>
                                </goals>
                                <phase>prepare-package</phase>
                                <configuration>
                                    <artifactItems>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>brp-database</artifactId>
                                            <version>${database.version}</version>
                                            <overWrite>true</overWrite>
                                            <outputDirectory>${project.build.directory}/brp-sql</outputDirectory>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp.properties</groupId>
                                            <artifactId>brp-test-properties</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                            <overWrite>true</overWrite>
                                            <outputDirectory>${project.build.directory}/brp_properties</outputDirectory>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>

                            <execution>
                                <id>copy-artifacts</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <configuration>
                                    <stripClassifier>true</stripClassifier>
                                    <stripVersion>true</stripVersion>
                                    <outputDirectory>target/binaries</outputDirectory>
                                    <artifactItems>
                                        <!-- ARTIFACTS ISC -->
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-isc-console-webapp</artifactId>
                                            <version>${project.version}</version>
                                            <type>war</type>
                                        </artifactItem>
                                        <!-- ACTIFACTS TOOLS -->
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-ggo-viewer</artifactId>
                                            <version>${project.version}</version>
                                            <type>war</type>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-tools-controle</artifactId>
                                            <version>${project.version}</version>
                                            <type>jar</type>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>

                            <execution>
                                <id>copy-zips</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>copy</goal>
                                </goals>
                                <configuration>
                                    <stripClassifier>true</stripClassifier>
                                    <stripVersion>true</stripVersion>
                                    <outputDirectory>target/binaries</outputDirectory>
                                    <artifactItems>
                                        <!-- BINARIES IV -->
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-iv-logging</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-init-logging-runtime.zip</destFileName>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-iv-naarbrp</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-init-naarbrp.zip</destFileName>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-iv-naarlo3</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-init-naarlo3.zip</destFileName>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-iv-naarvoisc</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-init-naarvoisc.zip</destFileName>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-iv-hornetq</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>hornetq.zip</destFileName>
                                        </artifactItem>

                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-isc-synchronisatie</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-synchronisatie-runtime.zip</destFileName>
                                        </artifactItem>

                                        <!-- BINARIES ISC -->
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-isc-isc</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-isc-runtime.zip</destFileName>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-isc-routering</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-routering-runtime.zip</destFileName>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-isc-voisc</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-voisc-runtime.zip</destFileName>
                                        </artifactItem>
                                        <!-- BINARIES TOOLS -->

                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-tools-mailbox</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-tools-mailbox.zip</destFileName>
                                        </artifactItem>

                                        <!--
                                        <artifactItem>
                                            <groupId>nl.bzk.migratiebrp</groupId>
                                            <artifactId>migr-test-isc</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                        </artifactItem>
                                        -->
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-tools-levering-vergelijker</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-tools-levering-vergelijker.zip</destFileName>
                                        </artifactItem>
                                        <artifactItem>
                                            <groupId>nl.bzk.brp</groupId>
                                            <artifactId>distributie-zip-tools-proefsynchronisatie</artifactId>
                                            <version>${project.version}</version>
                                            <type>zip</type>
                                            <destFileName>migr-tools-proefsynchronisatie.zip</destFileName>
                                        </artifactItem>
                                    </artifactItems>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <plugin>
                        <groupId>org.codehaus.mojo</groupId>
                        <artifactId>build-helper-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>parse-version</id>
                                <phase>validate</phase>
                                <goals>
                                    <goal>parse-version</goal>
                                </goals>
                            </execution>
                        </executions>
                    </plugin>

                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-assembly-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>assembly-iv</id>
                                <phase>install</phase>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                                <configuration>
                                    <descriptors>
                                        <descriptor>src/main/assembly/assembly-iv.xml</descriptor>
                                    </descriptors>
                                </configuration>
                            </execution>
                            <execution>
                                <id>assembly-isc</id>
                                <phase>install</phase>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                                <configuration>
                                    <descriptors>
                                        <descriptor>src/main/assembly/assembly-isc.xml</descriptor>
                                    </descriptors>
                                </configuration>
                            </execution>
                            <execution>
                                <id>assembly-tools</id>
                                <phase>install</phase>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                                <configuration>
                                    <descriptors>
                                        <descriptor>src/main/assembly/assembly-tools.xml</descriptor>
                                    </descriptors>
                                </configuration>
                            </execution>
                            <execution>
                                <id>assembly-brp</id>
                                <phase>prepare-package</phase>
                                <goals>
                                    <goal>single</goal>
                                </goals>
                                <configuration>
                                    <descriptors>
                                        <descriptor>src/main/assembly/assembly-brp.xml</descriptor>
                                    </descriptors>
                                </configuration>
                            </execution>
                        </executions>
                        <configuration>
                            <archive>
                                <compress>true</compress>
                            </archive>
                        </configuration>
                    </plugin>

                    <plugin>
                        <artifactId>maven-clean-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>auto-clean</id>
                                <phase>install</phase>
                                <goals>
                                    <goal>clean</goal>
                                </goals>
                                <configuration>
                                    <excludeDefaultDirectories>true</excludeDefaultDirectories>
                                    <filesets>
                                        <fileset>
                                            <directory>target/</directory>
                                            <includes>
                                                <include>**/brp_properties/**</include>
                                            </includes>
                                        </fileset>
                                    </filesets>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>
</project>
